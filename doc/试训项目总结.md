## 实训项目架构
### gateway
1. 项目采用netty做的服务网关，功能上他根据对称的解析方式把客户端的数据解析成业务数据,然后封装成任务提交到项目中,具体方式可以是字节数组反序列成对象等形式。
2. netty作为服务器网关，它在处理请求上的高效的实现机制很重要，例如它的Reactor模型，异步模型，，0拷贝等机制的实现原理。
3. netty这边是网关，所以一些网络消息处理要注重一下细节，例如粘包处理时,高频率的尝试性行为，内存申请要把控一下,同时要能治理自己的连接。
4. gateway - service其中是通过提交账号线程的任务去反射具体service的方法执行的，在反射这里可以做厚点，加上权限校验等机制，具体service中就不用重复去写功能开启检查等逻辑了。
### 后台架构
1. 委托spring管理所有模块，同时spring很多功能后续拓展使用起来会方便一点。
2. 线程模型 [账号线程，地图线程，其他线程] 用某种hash方式印射到具体线程上，一些线程不安全数据模块的用这种方式规避掉风险，如果线程之间业务需要调用，暂时可以通过命令方式去做。注意一下线程池的设计，拒绝策略等知识点。
3. 缓存与db 有些信息变动频率很高，但是没有必要立刻入库保存，一方面db压力会比较大，另一方面从db拉数据还要经过各种io 速度会比较慢，同时我们用序列化方式存储业务模块数据，这里也是有损耗的。所以需要一个内存的缓存。这个缓存模块至少要支持缓存失效，不能让这个模块无限膨胀，占据大部分内存。
4. eventBus 这里还是很薄的一个模块，本质上是一个map，也是走反射调用的。最好做厚一点，能达到这样的效果:push一个event，能自己决定去哪些线程执行相对应的逻辑。
5. 静态资源 支持解析csv成java对象，同时可以二次解析一些复杂的对象字段。项目中的做得比较简单，没有提供热更，多重索引，命中检查等功能。
6. 调度服务 主要是一些周期和cron调度，目前使用需要注意的地方[调度服务资源设置,调度任务command要对应到具体线程执行,调度并行]
### 个人总结
1. 编码规范 编码规范不仅是代码命令,驼峰,魔法值这种地方.模块分包,动态静态数据分离,模块边界这些难以分辨的也比较难以处理,如果没把控好,后期维护会很麻烦.
2. 编程思想 个人写代码习惯有了很大改变,用枚举,常量之类的语法规避掉重复的代码.对于需要拓展的模块,公共部分如何用多态联系在一起,用子类去完成特殊的需求.
3. 知识储备 最多的地方就是java知识储备变多.从最底层的netty到游戏中的业务,大多数的点都自己用代码实现了一遍,之前只是了解原理,没有手动去写,所以没有发现 - 解决问题的这个过程.
4. 个人经验 [清楚需求再编程,不然做的事没有意义]--[实现一个功能,自己先评估执行力和机制的契合程度,把功能弄出来是首要]--[遇到问题解决不了,及时沟通]
5. 游戏编程细节 [游戏后台逻辑还是有很大的不同,相对于其他的后台,游戏的逻辑比较复杂,模块比较多,模块可能藏的坑比较深,例如要防止玩家利用bug刷奖,敏感数据记录日志,模块内业务前后统一]